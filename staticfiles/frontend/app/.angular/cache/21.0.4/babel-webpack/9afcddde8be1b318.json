{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { debounceTime, distinctUntilChanged } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@discussit/core/services/group/group.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/cdk/text-field\";\nimport * as i10 from \"@angular/material/radio\";\nfunction CreateGroupComponent_mat_hint_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-hint\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const title_r2 = i0.ɵɵreference(8);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"Title will appear as g/\", title_r2.value);\n  }\n}\nfunction CreateGroupComponent_mat_radio_group_18_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"mat-radio-button\", 18);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const type_r3 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"value\", type_r3.value);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", type_r3.title, \" \");\n  }\n}\nfunction CreateGroupComponent_mat_radio_group_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-radio-group\", 16);\n    i0.ɵɵtemplate(1, CreateGroupComponent_mat_radio_group_18_ng_container_1_Template, 3, 2, \"ng-container\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.types);\n  }\n}\nfunction CreateGroupComponent_li_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"\", type_r5.title, \": \", type_r5.info);\n  }\n}\nexport let CreateGroupComponent = /*#__PURE__*/(() => {\n  class CreateGroupComponent {\n    constructor(dialogRef, data, router, groupService) {\n      this.dialogRef = dialogRef;\n      this.data = data;\n      this.router = router;\n      this.groupService = groupService;\n      this.new = true;\n      this.types = [{\n        title: 'Public',\n        value: 'PUBLIC',\n        info: 'Anyone can view, post, and comment to this community.'\n      }, {\n        title: 'Restricted',\n        value: 'RESTRICTED',\n        info: 'Anyone can view this community, but only approved users can post.'\n      }, {\n        title: 'Private',\n        value: 'Private',\n        info: 'Only approved users can view and submit to this community.'\n      }];\n    }\n    ngOnInit() {\n      console.log(this.data);\n      this.user = this.data.user;\n      this.initialize();\n    }\n    initialize() {\n      this.groupForm = new FormGroup({\n        title: new FormControl('', {\n          validators: [Validators.required]\n        }),\n        description: new FormControl('', {\n          validators: [Validators.required]\n        }),\n        type: new FormControl(this.types[0].value, {\n          validators: [Validators.required]\n        })\n      });\n      this.groupForm.valueChanges.pipe(debounceTime(1000), distinctUntilChanged()).subscribe(response => {\n        console.log(response);\n      });\n    }\n    close() {\n      this.dialogRef.close();\n    }\n    submit() {\n      const groupData = {\n        name: this.groupForm.controls.title.value,\n        description: this.groupForm.controls.description.value,\n        group_type: this.groupForm.controls.type.value.toUpperCase()\n      };\n      this.groupService.createGroup(groupData).subscribe(response => {\n        console.log(response);\n        this.close();\n        this.router.navigate(['group', response.id]);\n      }, err => {\n        console.log(err);\n      });\n    }\n    static {\n      this.ɵfac = function CreateGroupComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CreateGroupComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.GroupService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CreateGroupComponent,\n        selectors: [[\"app-create-group\"]],\n        standalone: false,\n        decls: 26,\n        vars: 6,\n        consts: [[\"title\", \"\"], [1, \"create-group\"], [1, \"group-form\", 3, \"formGroup\"], [1, \"font-bold\"], [\"appearance\", \"outline\", 1, \"width-100\"], [\"matInput\", \"\", \"maxlength\", \"25\", \"formControlName\", \"title\", \"placeholder\", \"Title\"], [\"align\", \"end\"], [\"align\", \"start\", 4, \"ngIf\"], [\"matInput\", \"\", \"formControlName\", \"description\", \"placeholder\", \"Tell everyone what this group is about\", \"cdkTextareaAutosize\", \"\", \"cdkAutosizeMinRows\", \"2\", 1, \"font-sm\"], [\"id\", \"example-radio-group-label\"], [\"aria-labelledby\", \"example-radio-group-label\", \"class\", \"example-radio-group\", \"color\", \"warn\", \"formControlName\", \"type\", 4, \"ngIf\"], [\"class\", \"sub-text\", 4, \"ngFor\", \"ngForOf\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"end center\", \"fxLayoutGap\", \"24px\"], [\"mat-raised-button\", \"\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\", \"disabled\"], [\"align\", \"start\"], [\"aria-labelledby\", \"example-radio-group-label\", \"color\", \"warn\", \"formControlName\", \"type\", 1, \"example-radio-group\"], [4, \"ngFor\", \"ngForOf\"], [1, \"example-radio-button\", 3, \"value\"], [1, \"sub-text\"]],\n        template: function CreateGroupComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"form\", 2)(2, \"p\", 3);\n            i0.ɵɵtext(3, \"Create a community\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"mat-form-field\", 4)(5, \"mat-label\");\n            i0.ɵɵtext(6, \"Title\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(7, \"input\", 5, 0);\n            i0.ɵɵelementStart(9, \"mat-hint\", 6);\n            i0.ɵɵtext(10);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(11, CreateGroupComponent_mat_hint_11_Template, 2, 1, \"mat-hint\", 7);\n            i0.ɵɵelement(12, \"br\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"mat-form-field\", 4)(14, \"textarea\", 8);\n            i0.ɵɵtext(15, \"      \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(16, \"label\", 9);\n            i0.ɵɵtext(17, \"Select your group type\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(18, CreateGroupComponent_mat_radio_group_18_Template, 2, 1, \"mat-radio-group\", 10);\n            i0.ɵɵelementStart(19, \"ul\");\n            i0.ɵɵtemplate(20, CreateGroupComponent_li_20_Template, 2, 2, \"li\", 11);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"div\", 12)(22, \"button\", 13);\n            i0.ɵɵlistener(\"click\", function CreateGroupComponent_Template_button_click_22_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.close());\n            });\n            i0.ɵɵtext(23, \"Cancel\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"button\", 14);\n            i0.ɵɵlistener(\"click\", function CreateGroupComponent_Template_button_click_24_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.submit());\n            });\n            i0.ɵɵtext(25, \"Create\");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            const title_r2 = i0.ɵɵreference(8);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"formGroup\", ctx.groupForm);\n            i0.ɵɵadvance(9);\n            i0.ɵɵtextInterpolate1(\"\", title_r2.value.length, \" / 25\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", title_r2.value);\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngIf\", ctx.types.length);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.types);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"disabled\", !ctx.groupForm.valid);\n          }\n        },\n        dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.MaxLengthValidator, i5.FormGroupDirective, i5.FormControlName, i6.MatButton, i7.MatFormField, i7.MatLabel, i7.MatHint, i8.MatInput, i9.CdkTextareaAutosize, i10.MatRadioGroup, i10.MatRadioButton],\n        styles: [\".create-group-section[_ngcontent-%COMP%]{margin:8px 0;border:1px solid #dedede;border-radius:8px;display:flex;background:#fff;padding:16px;width:auto}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.sub-text[_ngcontent-%COMP%]{font-size:12px;color:#707070}\"]\n      });\n    }\n  }\n  return CreateGroupComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}