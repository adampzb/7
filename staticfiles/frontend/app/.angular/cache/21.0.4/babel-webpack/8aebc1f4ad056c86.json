{"ast":null,"code":"import { ConfirmationDialogComponent } from '@discussit/app/components/confirmation-dialog/confirmation-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@discussit/core/services/user/user.service\";\nimport * as i3 from \"@discussit/core/services/group/group.service\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/expansion\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/material/list\";\nimport * as i10 from \"@angular/material/tooltip\";\nimport * as i11 from \"../group-feed/group-feed.component\";\nimport * as i12 from \"@discussit/core/pipes/safe-content/safe-content.pipe\";\nconst _c0 = a0 => [\"../../../user\", a0];\nfunction GroupComponent_div_10_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 28);\n    i0.ɵɵpipe(1, \"safeContent\");\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"innerHtml\", i0.ɵɵpipeBind1(1, 1, ctx_r0.group.description), i0.ɵɵsanitizeHtml);\n  }\n}\nfunction GroupComponent_div_10_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"g/\", ctx_r0.group == null ? null : ctx_r0.group.name, \" hasn't added any description yet.\");\n  }\n}\nfunction GroupComponent_div_10_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.group.members_count, \" Member(s) \");\n  }\n}\nfunction GroupComponent_div_10_ng_container_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function GroupComponent_div_10_ng_container_22_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.joinGroup());\n    });\n    i0.ɵɵtext(2, \"Join group\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction GroupComponent_div_10_ng_template_23_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function GroupComponent_div_10_ng_template_23_ng_container_0_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.leaveGroup());\n    });\n    i0.ɵɵtext(2, \"Leave group\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction GroupComponent_div_10_ng_template_23_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function GroupComponent_div_10_ng_template_23_ng_template_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.cancel());\n    });\n    i0.ɵɵtext(1, \"Cancel pending request\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction GroupComponent_div_10_ng_template_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, GroupComponent_div_10_ng_template_23_ng_container_0_Template, 3, 0, \"ng-container\", 26)(1, GroupComponent_div_10_ng_template_23_ng_template_1_Template, 2, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n  }\n  if (rf & 2) {\n    const cancelRequest_r5 = i0.ɵɵreference(2);\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.group.member_status && ctx_r0.group.member_status.is_approved)(\"ngIfElse\", cancelRequest_r5);\n  }\n}\nfunction GroupComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"span\", 16);\n    i0.ɵɵtext(2, \" About Community \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 17);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, GroupComponent_div_10_span_5_Template, 2, 3, \"span\", 18)(6, GroupComponent_div_10_span_6_Template, 2, 1, \"span\", 19);\n    i0.ɵɵelementStart(7, \"span\", 20);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 21);\n    i0.ɵɵelement(10, \"mat-divider\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 22);\n    i0.ɵɵtemplate(12, GroupComponent_div_10_span_12_Template, 2, 1, \"span\", 23);\n    i0.ɵɵelementStart(13, \"span\", 24)(14, \"mat-icon\");\n    i0.ɵɵtext(15, \"calendar_today\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"span\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 21);\n    i0.ɵɵelement(20, \"mat-divider\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 25);\n    i0.ɵɵtemplate(22, GroupComponent_div_10_ng_container_22_Template, 3, 0, \"ng-container\", 26)(23, GroupComponent_div_10_ng_template_23_Template, 3, 2, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(25, \"button\", 27);\n    i0.ɵɵtext(26, \"Invite Users\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const showMemberActions_r6 = i0.ɵɵreference(24);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"g/\", ctx_r0.group == null ? null : ctx_r0.group.name);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.group.description);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.group.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.group.group_type, \" group\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.group.members_count);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" Created \", i0.ɵɵpipeBind1(18, 8, ctx_r0.group.created_at), \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.group.member_status)(\"ngIfElse\", showMemberActions_r6);\n  }\n}\nfunction GroupComponent_div_11_ng_container_5_mat_divider_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-divider\");\n  }\n}\nfunction GroupComponent_div_11_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"mat-expansion-panel\", 37)(2, \"mat-expansion-panel-header\", 38)(3, \"b\", 39);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(5, \"p\", 40);\n    i0.ɵɵpipe(6, \"safeContent\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, GroupComponent_div_11_ng_container_5_mat_divider_7_Template, 1, 0, \"mat-divider\", 41);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const rule_r7 = ctx.$implicit;\n    const last_r8 = ctx.last;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", rule_r7.title, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"innerHtml\", i0.ɵɵpipeBind1(6, 3, rule_r7.description), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !last_r8);\n  }\n}\nfunction GroupComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 2)(2, \"span\", 16);\n    i0.ɵɵtext(3, \" Community Rules \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 35);\n    i0.ɵɵtemplate(5, GroupComponent_div_11_ng_container_5_Template, 8, 5, \"ng-container\", 36);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.group == null ? null : ctx_r0.group.rules);\n  }\n}\nfunction GroupComponent_div_12_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"a\", 45);\n    i0.ɵɵelement(2, \"img\", 46);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const moderator_r9 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c0, moderator_r9.user.username));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" u/\", moderator_r9.user.username, \" \");\n  }\n}\nfunction GroupComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42)(1, \"div\", 43)(2, \"span\", 16);\n    i0.ɵɵtext(3, \" Moderators \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 44)(5, \"mat-nav-list\");\n    i0.ɵɵtemplate(6, GroupComponent_div_12_ng_container_6_Template, 4, 4, \"ng-container\", 36);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.moderators.slice(0, 5));\n  }\n}\nexport let GroupComponent = /*#__PURE__*/(() => {\n  class GroupComponent {\n    constructor(router, route, userService, groupService, dialog) {\n      this.router = router;\n      this.route = route;\n      this.userService = userService;\n      this.groupService = groupService;\n      this.dialog = dialog;\n      this.moderators = [];\n    }\n    ngOnInit() {\n      this.group_id = this.route.snapshot.params.id;\n      this.getAuthUser();\n      this.getGroupDetail(this.group_id);\n    }\n    getAuthUser() {\n      this.userService.userInitialized.subscribe(initialized => {\n        if (initialized) {\n          this.userService.user.subscribe(user => {\n            this.user = user;\n            // console.log(this.user);\n          });\n        }\n      });\n    }\n    getGroupDetail(group_id) {\n      this.groupService.getGroupDetail(group_id).subscribe(response => {\n        console.log(response);\n        this.group = response;\n        this.getModerators();\n      }, err => {\n        console.log(err);\n      });\n    }\n    getModerators() {\n      this.groupService.filterMembers('MODERATOR', this.group.id, '').subscribe(response => {\n        this.moderators = response.results;\n      });\n    }\n    joinGroup() {\n      if (!this.user) return;\n      const data = {\n        group: this.group.id,\n        user: this.user.id\n      };\n      this.groupService.joinGroup(this.group.id, data).subscribe(response => {\n        this.group.member_status = response;\n      });\n    }\n    cancel() {\n      if (!this.user) return;\n      const dialogRef = this.dialog.open(ConfirmationDialogComponent, {\n        data: {\n          message: `Are you sure you want to leave the g/${this.group.name} group?`\n        },\n        height: '205px',\n        width: '410px'\n      });\n      dialogRef.afterClosed().subscribe(response => {\n        console.log(response);\n        if (response) {\n          const data = {\n            user: this.user.id,\n            member_request: this.group.member_status.id\n          };\n          this.groupService.cancelRequest(this.group.id, this.group.member_status.id).subscribe(response => {\n            if (response.success) {\n              this.group.member_status = null;\n            }\n          });\n        }\n      });\n    }\n    leaveGroup() {\n      if (!this.user) return;\n      // open confirmation dialog\n      const dialogRef = this.dialog.open(ConfirmationDialogComponent, {\n        data: {\n          message: `Are you sure you want to leave the g/${this.group.name} group?`\n        },\n        height: '205px',\n        width: '410px'\n      });\n      // call leave group api\n      dialogRef.afterClosed().subscribe(response => {\n        console.log(response);\n        if (response) {\n          const data = {\n            user: this.user.id,\n            member_request: this.group.member_status.id\n          };\n          this.groupService.leaveGroup(this.group.id, data).subscribe(response => {\n            this.group.member_status = null;\n          });\n        }\n      });\n    }\n    static {\n      this.ɵfac = function GroupComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || GroupComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.GroupService), i0.ɵɵdirectiveInject(i4.MatDialog));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: GroupComponent,\n        selectors: [[\"app-group\"]],\n        standalone: false,\n        decls: 13,\n        vars: 4,\n        consts: [[\"showMemberActions\", \"\"], [\"cancelRequest\", \"\"], [\"fxLayout\", \"column\"], [\"fxLayout\", \"row\", \"fxLayoutGap\", \"16px\", 1, \"row-container\", \"shadow-sm\", \"width-100\"], [1, \"default-community-cover\"], [1, \"community-avatar\", \"shadow-md\"], [\"src\", \"https://cdn-icons-png.flaticon.com/512/2170/2170765.png\", \"alt\", \"Community\", 1, \"community-icon\"], [\"fxLayout\", \"row\", \"fxLayoutGap\", \"16px\", 1, \"row-container\", \"width-100\"], [\"fxLayout\", \"column\", \"fxFlex\", \"70\", \"fxFlex.lt-lg\", \"100\", 1, \"child-container-1\", \"group-card\", \"shadow-sm\"], [3, \"group\"], [\"fxLayout\", \"column\", \"fxFlex\", \"30\", \"fxHide.lt-lg\", \"\", 1, \"child-container-2\"], [1, \"group-card\", \"shadow-sm\", \"about-section\"], [\"fxLayout\", \"column\", \"class\", \"width-100\", 4, \"ngIf\"], [\"class\", \"group-card shadow-sm rules-section\", \"fxLayout\", \"row\", 4, \"ngIf\"], [\"class\", \"group-card shadow-sm related-section\", 4, \"ngIf\"], [\"fxLayout\", \"column\", 1, \"width-100\"], [1, \"heading-5\", \"text-uppercase\"], [1, \"heading-4\", \"font-bold\", \"margin-top-2\"], [\"class\", \"margin-y-3 color-tertiary desc-text\", 3, \"innerHtml\", 4, \"ngIf\"], [\"class\", \"margin-y-3 color-tertiary desc-text\", 4, \"ngIf\"], [1, \"desc-text\"], [1, \"margin-y-4\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\", 1, \"desc-text\"], [\"class\", \"font-bold\", 4, \"ngIf\"], [\"fxLayoutAlign\", \"start center\", \"fxLayoutGap\", \"8px\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center center\", \"fxLayoutGap\", \"16px\", 1, \"\"], [4, \"ngIf\", \"ngIfElse\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", \"fxFlex\", \"40\"], [1, \"margin-y-3\", \"color-tertiary\", \"desc-text\", 3, \"innerHtml\"], [1, \"margin-y-3\", \"color-tertiary\", \"desc-text\"], [1, \"font-bold\"], [\"mat-flat-button\", \"\", \"color\", \"primary\", \"fxFlex\", \"50\", 3, \"click\"], [\"mat-flat-button\", \"\", \"color\", \"primary\", \"fxFlex\", \"60\", \"matTooltip\", \"Leave group\", 3, \"click\"], [\"mat-flat-button\", \"\", \"color\", \"primary\", \"fxFlex\", \"60\", \"matTooltip\", \"Cancel request\", 3, \"click\"], [\"fxLayout\", \"row\", 1, \"group-card\", \"shadow-sm\", \"rules-section\"], [\"fxLayout\", \"column\", \"fxLayoutGap\", \"4px\"], [4, \"ngFor\", \"ngForOf\"], [2, \"box-shadow\", \"none\"], [2, \"padding\", \"2px 8px\"], [1, \"padding-right-1\"], [3, \"innerHtml\"], [4, \"ngIf\"], [1, \"group-card\", \"shadow-sm\", \"related-section\"], [\"fxLayout\", \"column\", \"fxFlex\", \"100\"], [\"fxLayout\", \"column\", \"fxLayoutGap\", \"4px\", \"fxFlex\", \"100\"], [\"mat-list-item\", \"\", 3, \"routerLink\"], [\"src\", \"https://cdn-icons-png.flaticon.com/512/552/552848.png\", \"alt\", \"\", \"height\", \"30\", \"width\", \"30\", 1, \"margin-right-2\"]],\n        template: function GroupComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"div\", 5);\n            i0.ɵɵelement(4, \"img\", 6);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(5, \"div\", 7)(6, \"div\", 8);\n            i0.ɵɵelement(7, \"app-group-feed\", 9);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"div\", 10)(9, \"div\", 11);\n            i0.ɵɵtemplate(10, GroupComponent_div_10_Template, 27, 10, \"div\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(11, GroupComponent_div_11_Template, 6, 1, \"div\", 13)(12, GroupComponent_div_12_Template, 7, 1, \"div\", 14);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"group\", ctx.group);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.group);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.group && (ctx.group.rules == null ? null : ctx.group.rules.length));\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.moderators.length);\n          }\n        },\n        dependencies: [i5.NgForOf, i5.NgIf, i6.MatButton, i7.MatExpansionPanel, i7.MatExpansionPanelHeader, i8.MatIcon, i9.MatNavList, i9.MatListItem, i9.MatDivider, i10.MatTooltip, i1.RouterLink, i11.GroupFeedComponent, i5.DatePipe, i12.SafeContentPipe],\n        styles: [\".group-card[_ngcontent-%COMP%]{margin:8px 0;border:1px solid #dedede;border-radius:8px;display:flex;background:#fff;padding:16px;width:auto}.default-community-cover[_ngcontent-%COMP%]{background:#cb2d3e;background:linear-gradient(to right,#ef473a,#cb2d3e);width:100%;height:250px;border:1px solid #dedede;border-radius:8px;position:relative}.community-avatar[_ngcontent-%COMP%]{background-color:#e6e6e6;height:140px;width:140px;position:absolute;left:10%;bottom:-28%;border:4px solid #ffffff;border-radius:50%;z-index:1}.community-avatar[_ngcontent-%COMP%]   .community-icon[_ngcontent-%COMP%]{height:100px;width:100px;margin:15%}@media only screen and (max-width:1280px){.community-avatar[_ngcontent-%COMP%]{left:42%}}.group-creation-text[_ngcontent-%COMP%]{font-size:12px;color:#232323}.desc-text[_ngcontent-%COMP%]{font-size:14px}.row-container[_ngcontent-%COMP%]{width:100%}.child-container-1[_ngcontent-%COMP%]{padding-top:60px}.about-section[_ngcontent-%COMP%], .related-section[_ngcontent-%COMP%], .rules-section[_ngcontent-%COMP%]{min-height:160px}\"]\n      });\n    }\n  }\n  return GroupComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}