{"ast":null,"code":"import { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { debounceTime, distinctUntilChanged } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@discussit/core/services/post/post.service\";\nimport * as i2 from \"@discussit/core/services/user/user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/card\";\nimport * as i8 from \"@angular/material/form-field\";\nimport * as i9 from \"@angular/material/input\";\nimport * as i10 from \"@angular/material/progress-spinner\";\nfunction CreatePostComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 3);\n    i0.ɵɵelement(2, \"mat-spinner\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"diameter\", 30);\n  }\n}\nfunction CreatePostComponent_ng_template_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 17);\n    i0.ɵɵelement(2, \"img\", 18);\n    i0.ɵɵelementStart(3, \"span\", 19);\n    i0.ɵɵtext(4, \"Posting under \");\n    i0.ɵɵelementStart(5, \"b\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \" as \");\n    i0.ɵɵelementStart(8, \"b\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"g/\", ctx_r1.group == null ? null : ctx_r1.group.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"u/\", ctx_r1.user == null ? null : ctx_r1.user.username);\n  }\n}\nfunction CreatePostComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-card\", 5);\n    i0.ɵɵtemplate(1, CreatePostComponent_ng_template_1_ng_container_1_Template, 10, 2, \"ng-container\", 6);\n    i0.ɵɵelementStart(2, \"form\", 7)(3, \"mat-form-field\", 8)(4, \"mat-label\");\n    i0.ɵɵtext(5, \"Title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 9, 1);\n    i0.ɵɵelementStart(8, \"mat-hint\", 10);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(10, \"div\", 11);\n    i0.ɵɵelementStart(11, \"div\", 12);\n    i0.ɵɵelement(12, \"app-tiptap-editor\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 14)(14, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function CreatePostComponent_ng_template_1_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.submit());\n    });\n    i0.ɵɵtext(15, \"Save draft\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function CreatePostComponent_ng_template_1_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.submit());\n    });\n    i0.ɵɵtext(17, \"Post\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const title_r3 = i0.ɵɵreference(7);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.group);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.postForm);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"\", title_r3.value.length, \" / 200\");\n  }\n}\nexport let CreatePostComponent = /*#__PURE__*/(() => {\n  class CreatePostComponent {\n    constructor(postService, userService, router) {\n      this.postService = postService;\n      this.userService = userService;\n      this.router = router;\n      this.isLoading = true;\n      this.edit = false;\n    }\n    ngOnInit() {\n      this.initializeForm();\n      this.getAuthUser();\n    }\n    initializeForm() {\n      this.postForm = new FormGroup({\n        title: new FormControl('', {\n          validators: [Validators.required]\n        }),\n        content: new FormControl(this.content, {\n          validators: [Validators.required]\n        })\n      });\n      this.postForm.valueChanges.pipe(debounceTime(3000), distinctUntilChanged()).subscribe(response => {\n        console.log(response);\n      });\n      this.isLoading = false;\n    }\n    getAuthUser() {\n      this.userService.userInitialized.subscribe(initialized => {\n        if (initialized) {\n          this.userService.user.subscribe(user => {\n            this.user = user;\n          });\n        }\n      });\n    }\n    submit() {\n      const data = {\n        title: this.postForm.controls.title.value,\n        content: this.postForm.controls.content.value,\n        author: this.user.id,\n        group: this.group ? this.group.id : null\n      };\n      this.postService.createPost(data).subscribe(response => {\n        this.router.navigate(['', response.uuid]);\n      }, err => {\n        console.log(err);\n      });\n    }\n    static {\n      this.ɵfac = function CreatePostComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CreatePostComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CreatePostComponent,\n        selectors: [[\"app-create-post\"]],\n        inputs: {\n          group: \"group\"\n        },\n        standalone: false,\n        decls: 3,\n        vars: 2,\n        consts: [[\"showContent\", \"\"], [\"title\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center center\", \"fxLayoutGap\", \"10px\", 1, \"post-create\"], [\"color\", \"warn\", 3, \"diameter\"], [1, \"post-create\"], [4, \"ngIf\"], [\"fxLayout\", \"column\", \"autocomplete\", \"off\", 1, \"blog-form\", 3, \"formGroup\"], [\"appearance\", \"outline\", 1, \"width-100\"], [\"matInput\", \"\", \"maxlength\", \"200\", \"formControlName\", \"title\", \"placeholder\", \"Title\"], [\"align\", \"end\"], [1, \"\"], [1, \"editor-container\", \"width-100\"], [\"formControlName\", \"content\", \"placeholder\", \"Write your post content here...\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"end center\", \"fxLayoutGap\", \"24px\"], [\"mat-raised-button\", \"\", \"disabled\", \"\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"fxLayoutAlign\", \"start center\", \"fxLayoutGap\", \"16px\", 1, \"margin-bottom-2\"], [\"src\", \"https://cdn-icons-png.flaticon.com/512/2170/2170765.png\", \"alt\", \"Community\", 1, \"community-icon\"], [1, \"create-post-subtext\"]],\n        template: function CreatePostComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtemplate(0, CreatePostComponent_ng_container_0_Template, 3, 1, \"ng-container\", 2)(1, CreatePostComponent_ng_template_1_Template, 18, 3, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n          }\n          if (rf & 2) {\n            const showContent_r4 = i0.ɵɵreference(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading)(\"ngIfElse\", showContent_r4);\n          }\n        },\n        dependencies: [i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.MaxLengthValidator, i5.FormGroupDirective, i5.FormControlName, i6.MatButton, i7.MatCard, i8.MatFormField, i8.MatLabel, i8.MatHint, i9.MatInput, i10.MatProgressSpinner],\n        styles: [\".post-title[_ngcontent-%COMP%]{font-weight:500;font-size:20px;width:100%}.post-title[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::placeholder{font-size:14px;font-weight:400}.blog-form[_ngcontent-%COMP%]{margin-bottom:32px}.post-create[_ngcontent-%COMP%]{margin:16px 0;box-shadow:none;border:1px solid #dedede;border-radius:8px;display:flex;padding:20px;flex-direction:column}.create-post-subtext[_ngcontent-%COMP%]{font-size:14px;color:#707070}.create-post-subtext[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{font-weight:500;color:#232323}.community-icon[_ngcontent-%COMP%]{height:40px;width:40px;border:1px solid #e6e6e6;border-radius:50%;padding:2px;object-fit:cover}.editor-container[_ngcontent-%COMP%]{margin:16px 0}.editor-container[_ngcontent-%COMP%]     .ck-editor__editable{min-height:200px;font-family:Roboto,sans-serif}.editor-container[_ngcontent-%COMP%]     .ck-content{font-family:Roboto,sans-serif}\"]\n      });\n    }\n  }\n  return CreatePostComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}