{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport { environment } from '@discussit/env/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../storage/storage-handler.service\";\nexport let UserService = /*#__PURE__*/(() => {\n  class UserService {\n    constructor(http, storage) {\n      this.http = http;\n      this.storage = storage;\n      this.serverUrl = `${environment.serverUrl}`;\n      this.userInitialized = new BehaviorSubject(false);\n      console.log('UserService: serverUrl configured as:', this.serverUrl);\n      console.log('UserService: environment:', environment);\n      // Initialize user BehaviorSubject\n      this.user = new BehaviorSubject(null);\n    }\n    setUser(user, callback) {\n      console.log('UserService: Setting user:', user);\n      this.user.next(user);\n      if (user) {\n        this.storage.storeItem('user', user);\n      }\n      this.userInitialized.next(true);\n      if (callback) {\n        callback(user);\n      }\n    }\n    unsetUser() {\n      this.user.next(null);\n      this.storage.removeItem('user');\n    }\n    fetchUser(callback) {\n      if (this.user?.value) {\n        callback(this.user.value);\n      }\n      const storageUser = this.storage.getItem('user');\n      if (storageUser) {\n        this.setUser(storageUser, callback);\n      } else {\n        this.getAuthUser(user => this.setUser(user, callback));\n      }\n    }\n    getAuthUser(callback) {\n      console.log('UserService: Fetching authenticated user from:', this.serverUrl + '/rest-auth/user/');\n      this.http.get(this.serverUrl + '/rest-auth/user/').subscribe(response => {\n        console.log('UserService: Auth user response:', response);\n        callback(response);\n      }, error => {\n        console.error('UserService: Auth user error:', error);\n        callback(null);\n      });\n    }\n    getUserByUsername(username) {\n      return this.http.get(this.serverUrl + '/api/v1/users/' + username + '/');\n    }\n    register(postData) {\n      const url = this.serverUrl + '/rest-auth/registration/';\n      console.log('UserService: Making registration request to:', url);\n      console.log('UserService: Registration data:', postData);\n      return this.http.post(url, postData);\n    }\n    login(postData) {\n      const url = this.serverUrl + '/rest-auth/login/';\n      console.log('UserService: Making login request to:', url);\n      console.log('UserService: Login data:', postData);\n      return this.http.post(url, postData);\n    }\n    logout() {\n      return this.http.post(this.serverUrl + '/rest-auth/logout/', {});\n    }\n    addInterests(username) {\n      return;\n    }\n    userInvitations(username) {\n      return this.http.get(this.serverUrl + '/api/v1/users/' + username + '/invitations/');\n    }\n    userRequestedGroups(username) {\n      return this.http.get(this.serverUrl + '/api/v1/users/' + username + '/requested_groups/');\n    }\n    userInvites(username) {\n      return this.http.get(this.serverUrl + '/api/v1/users/' + username + '/user_invites/');\n    }\n    userUpvotes(username) {\n      return this.http.get(this.serverUrl + '/api/v1/users/' + username + '/user_upvotes/');\n    }\n    userDownvotes(username) {\n      return this.http.get(this.serverUrl + '/api/v1/users/' + username + '/user_downvotes/');\n    }\n    getBookmarks(username) {\n      return this.http.get(this.serverUrl + '/api/v1/users/' + username + '/bookmarks/');\n    }\n    static {\n      this.ɵfac = function UserService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || UserService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.StorageHandlerService));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: UserService,\n        factory: UserService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return UserService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}