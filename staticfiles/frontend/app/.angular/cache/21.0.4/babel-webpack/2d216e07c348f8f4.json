{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@discussit/core/services/comment/comment.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/material/button\";\nimport * as i4 from \"@angular/material/icon\";\nconst _c0 = a0 => ({\n  \"button-active\": a0\n});\nfunction CommentFooterComponent_a_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 6);\n    i0.ɵɵtext(1, \"Reply\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CommentFooterComponent_a_11_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Reply\");\n  }\n}\nfunction CommentFooterComponent_a_11_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Reply [1]\");\n  }\n}\nfunction CommentFooterComponent_a_11_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵtextInterpolate1(\"Replies [\", ctx_r1.comment.child_count, \"]\");\n  }\n}\nfunction CommentFooterComponent_a_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"a\", 7);\n    i0.ɵɵlistener(\"click\", function CommentFooterComponent_a_11_Template_a_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.nestedReplyEvent());\n    });\n    i0.ɵɵtemplate(1, CommentFooterComponent_a_11_ng_template_1_Template, 1, 0, \"ng-template\", 8)(2, CommentFooterComponent_a_11_ng_template_2_Template, 1, 0, \"ng-template\", 9)(3, CommentFooterComponent_a_11_ng_template_3_Template, 1, 1, \"ng-template\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngPlural\", ctx_r1.comment.child_count);\n  }\n}\nexport let CommentFooterComponent = /*#__PURE__*/(() => {\n  class CommentFooterComponent {\n    constructor(commentService) {\n      this.commentService = commentService;\n      this.nested = true;\n      this.mention = new EventEmitter();\n      this.nestedReply = new EventEmitter();\n      this.can_reply = true;\n      this.nestedReplyFlag = false;\n      this.user_vote = 0;\n    }\n    ngOnInit() {\n      if (this.user?.id == this.comment?.user?.id) {\n        this.can_reply = false;\n      }\n      this.checkUserVote();\n    }\n    checkUserVote() {\n      this.commentService.checkUserVote(this.uuid, this.comment.id).subscribe(response => {\n        console.log(response);\n        this.setVoteData(response);\n      });\n    }\n    setVoteData(response) {\n      this.user_vote = response?.vote;\n      this.comment.votes = response?.votes;\n    }\n    upvoteClicked() {\n      if (this.comment?.is_removed) {\n        return;\n      }\n      if (this.user_vote == 1) {\n        this.removeVote();\n      } else {\n        this.upvoteComment();\n      }\n    }\n    downvoteClicked() {\n      if (this.comment?.is_removed) {\n        return;\n      }\n      if (this.user_vote == -1) {\n        this.removeVote();\n      } else {\n        this.downvoteComment();\n      }\n    }\n    upvoteComment() {\n      this.commentService.upvoteComment(this.uuid, this.comment.id).subscribe(response => {\n        this.setVoteData(response);\n      }, err => {\n        console.log(err);\n      });\n    }\n    removeVote() {\n      this.commentService.removeVote(this.uuid, this.comment.id).subscribe(response => {\n        this.setVoteData(response);\n      }, err => {\n        console.log(err);\n      });\n    }\n    downvoteComment() {\n      this.commentService.downvoteComment(this.uuid, this.comment.id).subscribe(response => {\n        console.log(response);\n        this.setVoteData(response);\n      }, err => {\n        console.log(err);\n      });\n    }\n    mentionUser() {\n      this.mention.emit(this.comment.user);\n    }\n    nestedReplyEvent() {\n      this.nestedReply.emit(true);\n    }\n    static {\n      this.ɵfac = function CommentFooterComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CommentFooterComponent)(i0.ɵɵdirectiveInject(i1.CommentService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CommentFooterComponent,\n        selectors: [[\"app-comment-footer\"]],\n        inputs: {\n          comment: \"comment\",\n          user: \"user\",\n          uuid: \"uuid\",\n          nested: \"nested\"\n        },\n        outputs: {\n          mention: \"mention\",\n          nestedReply: \"nestedReply\"\n        },\n        standalone: false,\n        decls: 12,\n        vars: 11,\n        consts: [[\"fxLayout\", \"row\", \"fxLayoutAlign\", \"start center\", \"fxLayoutGap\", \"8px\", 1, \"width-100\"], [\"mat-icon-button\", \"\", 1, \"border\", 3, \"click\", \"ngClass\", \"disabled\"], [1, \"comment-votes\"], [1, \"\"], [\"class\", \"reply-btn\", 4, \"ngIf\"], [\"class\", \"reply-btn\", 3, \"ngPlural\", \"click\", 4, \"ngIf\"], [1, \"reply-btn\"], [1, \"reply-btn\", 3, \"click\", \"ngPlural\"], [\"ngPluralCase\", \"=0\"], [\"ngPluralCase\", \"=1\"], [\"ngPluralCase\", \"other\"]],\n        template: function CommentFooterComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1);\n            i0.ɵɵlistener(\"click\", function CommentFooterComponent_Template_button_click_1_listener() {\n              return ctx.upvoteClicked();\n            });\n            i0.ɵɵelementStart(2, \"mat-icon\");\n            i0.ɵɵtext(3, \"keyboard_arrow_up\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(4, \"p\", 2);\n            i0.ɵɵtext(5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"button\", 1);\n            i0.ɵɵlistener(\"click\", function CommentFooterComponent_Template_button_click_6_listener() {\n              return ctx.downvoteClicked();\n            });\n            i0.ɵɵelementStart(7, \"mat-icon\");\n            i0.ɵɵtext(8, \"keyboard_arrow_down\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"div\", 3);\n            i0.ɵɵtemplate(10, CommentFooterComponent_a_10_Template, 2, 0, \"a\", 4)(11, CommentFooterComponent_a_11_Template, 4, 1, \"a\", 5);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, ctx.user_vote == 1))(\"disabled\", !ctx.user);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtextInterpolate(ctx.comment.votes);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c0, ctx.user_vote == -1))(\"disabled\", !ctx.user);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", !ctx.user);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.nested);\n          }\n        },\n        dependencies: [i2.NgClass, i2.NgIf, i2.NgPlural, i2.NgPluralCase, i3.MatIconButton, i4.MatIcon],\n        styles: [\".button-active[_ngcontent-%COMP%]{color:#dc281e!important;border:1px solid #DC281E!important;border-radius:50%}.button-inactive[_ngcontent-%COMP%]{color:#545454;border:1px solid #d3d3d3;border-radius:50%}.reply-btn[_ngcontent-%COMP%]{text-decoration:none;margin-left:8px;border:1px solid #d3d3d3;padding:6px 12px;border-radius:4px;font-size:12px;line-height:16.41px;color:#232323;font-weight:400;cursor:pointer}.mat-icon-button[_ngcontent-%COMP%]{line-height:30px;width:30px;height:30px}.border[_ngcontent-%COMP%]{border:1px solid #dedede}.comment-votes[_ngcontent-%COMP%]{margin:8px 0}\"]\n      });\n    }\n  }\n  return CommentFooterComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}