{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@discussit/core/services/user/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/icon\";\nconst _c0 = () => [\"../sign-in\"];\nexport let SignUpComponent = /*#__PURE__*/(() => {\n  class SignUpComponent {\n    constructor(userService, router, snackbar) {\n      this.userService = userService;\n      this.router = router;\n      this.snackbar = snackbar;\n      this.isLoading = false;\n      this.hidePassword = true;\n      this.errors = [];\n    }\n    ngOnInit() {\n      // Updated to use username instead of first_name/last_name\n      this.registerForm = new FormGroup({\n        username: new FormControl('', {\n          validators: [Validators.required]\n        }),\n        email: new FormControl('', {\n          validators: [Validators.required, Validators.email]\n        }),\n        password1: new FormControl('', {\n          validators: [Validators.required]\n        }),\n        password2: new FormControl('', {\n          validators: [Validators.required]\n        })\n      });\n      console.log('Updated registration form:', this.registerForm);\n    }\n    get formControl() {\n      return this.registerForm.controls;\n    }\n    toggleVisibility() {\n      this.hidePassword = !this.hidePassword;\n    }\n    onSubmit() {\n      console.log('Sign-up form submitted');\n      console.log('Form valid:', this.registerForm.valid);\n      console.log('Form values:', this.registerForm.value);\n      console.log('Form errors:', this.getFormValidationErrors());\n      // Mark all fields as touched to show validation errors\n      this.markFormGroupTouched(this.registerForm);\n      if (!this.registerForm.valid) {\n        console.log('Form is invalid, not submitting');\n        this.snackbar.open('Please fill in all required fields', 'Close', {\n          duration: 3000\n        });\n        return;\n      }\n      const formData = {\n        username: this.registerForm.value.username,\n        email: this.registerForm.value.email,\n        password1: this.registerForm.value.password1,\n        password2: this.registerForm.value.password2\n      };\n      console.log('Sending registration request with data:', formData);\n      this.isLoading = true;\n      this.userService.register(formData).subscribe(result => {\n        console.log('Registration successful:', result);\n        this.isLoading = false;\n        this.registerForm.reset();\n        this.snackbar.open('Registered successfully. Proceed to login', 'Close', {\n          duration: 3000\n        });\n        this.router.navigate(['sign-in']);\n      }, err => {\n        console.error('Registration error:', err);\n        this.isLoading = false;\n        if (err.error) {\n          if (err.error.password1) {\n            this.snackbar.open(`${err.error.password1[0]}`, 'Close', {\n              duration: 5000\n            });\n          } else if (err.error.email) {\n            this.snackbar.open(`${err.error.email[0]}`, 'Close', {\n              duration: 5000\n            });\n          } else if (err.error.non_field_errors) {\n            this.snackbar.open(err.error.non_field_errors[0], 'Close', {\n              duration: 5000\n            });\n          } else {\n            this.snackbar.open('Registration failed. Please try again.', 'Close', {\n              duration: 5000\n            });\n          }\n        } else {\n          this.snackbar.open('Network error. Please check your connection.', 'Close', {\n            duration: 5000\n          });\n        }\n      });\n    }\n    // Helper method to mark all form fields as touched\n    markFormGroupTouched(formGroup) {\n      Object.keys(formGroup.controls).forEach(field => {\n        const control = formGroup.get(field);\n        control?.markAsTouched({\n          onlySelf: true\n        });\n      });\n    }\n    // Helper method to get form validation errors for debugging\n    getFormValidationErrors() {\n      let formErrors = {};\n      Object.keys(this.registerForm.controls).forEach(key => {\n        const controlErrors = this.registerForm.get(key)?.errors;\n        if (controlErrors) {\n          formErrors[key] = controlErrors;\n        }\n      });\n      return formErrors;\n    }\n    static {\n      this.ɵfac = function SignUpComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SignUpComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: SignUpComponent,\n        selectors: [[\"app-sign-up\"]],\n        standalone: false,\n        decls: 34,\n        vars: 11,\n        consts: [[1, \"auth-container\"], [1, \"login-form\"], [\"align\", \"center\", 1, \"text-white\"], [\"autocomplete\", \"off\", 1, \"width-100\", \"auth-form\", 3, \"formGroup\"], [1, \"width-100\", \"margin-bottom-4\"], [\"for\", \"username\"], [\"id\", \"username\", \"placeholder\", \"johndoe\", \"formControlName\", \"username\", \"type\", \"text\", 1, \"form-input\"], [\"for\", \"email\"], [\"id\", \"email\", \"placeholder\", \"jane@email.com\", \"formControlName\", \"email\", \"type\", \"email\", 1, \"form-input\"], [1, \"input-column\", \"margin-bottom-4\", 2, \"display\", \"flex\", \"gap\", \"16px\", \"position\", \"relative\"], [1, \"width-100\"], [\"for\", \"password1\"], [\"id\", \"password1\", \"placeholder\", \"dankworld12\", \"formControlName\", \"password1\", 1, \"form-input\", 3, \"type\"], [\"mat-icon-button\", \"\", \"matSuffix\", \"\", 1, \"toggle-visibility-btn\", 3, \"click\"], [\"for\", \"password2\"], [\"id\", \"password2\", \"placeholder\", \"dankworld12\", \"formControlName\", \"password2\", 1, \"form-input\", 3, \"type\"], [\"mat-button\", \"\", \"color\", \"primary\", 1, \"width-100\", \"custom-button\", \"block-button\", 3, \"click\"], [1, \"underline\", \"button-link\", 3, \"routerLink\"]],\n        template: function SignUpComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n            i0.ɵɵtext(3, \"Sign up for DiscussIt\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"form\", 3)(5, \"div\", 4)(6, \"label\", 5);\n            i0.ɵɵtext(7, \"Username\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(8, \"input\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"div\", 4)(10, \"label\", 7);\n            i0.ɵɵtext(11, \"Email\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(12, \"input\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"div\", 9)(14, \"div\", 10)(15, \"label\", 11);\n            i0.ɵɵtext(16, \"Password\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(17, \"input\", 12);\n            i0.ɵɵelementStart(18, \"button\", 13);\n            i0.ɵɵlistener(\"click\", function SignUpComponent_Template_button_click_18_listener() {\n              return ctx.toggleVisibility();\n            });\n            i0.ɵɵelementStart(19, \"mat-icon\");\n            i0.ɵɵtext(20);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(21, \"div\", 10)(22, \"label\", 14);\n            i0.ɵɵtext(23, \"Confirm password\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(24, \"input\", 15);\n            i0.ɵɵelementStart(25, \"button\", 13);\n            i0.ɵɵlistener(\"click\", function SignUpComponent_Template_button_click_25_listener() {\n              return ctx.toggleVisibility();\n            });\n            i0.ɵɵelementStart(26, \"mat-icon\");\n            i0.ɵɵtext(27);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(28, \"button\", 16);\n            i0.ɵɵlistener(\"click\", function SignUpComponent_Template_button_click_28_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵtext(29, \"Submit\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"p\");\n            i0.ɵɵtext(31, \"Already have an account? \");\n            i0.ɵɵelementStart(32, \"a\", 17);\n            i0.ɵɵtext(33, \"Sign In\");\n            i0.ɵɵelementEnd()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"formGroup\", ctx.registerForm);\n            i0.ɵɵadvance(13);\n            i0.ɵɵproperty(\"type\", ctx.hidePassword ? \"password\" : \"text\");\n            i0.ɵɵadvance();\n            i0.ɵɵattribute(\"aria-label\", \"Hide password\")(\"aria-pressed\", ctx.hidePassword);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.hidePassword ? \"visibility_off\" : \"visibility\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"type\", ctx.hidePassword ? \"password\" : \"text\");\n            i0.ɵɵadvance();\n            i0.ɵɵattribute(\"aria-label\", \"Hide password\")(\"aria-pressed\", ctx.hidePassword);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.hidePassword ? \"visibility_off\" : \"visibility\");\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(10, _c0));\n          }\n        },\n        dependencies: [i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i5.MatButton, i5.MatIconButton, i6.MatSuffix, i7.MatIcon, i2.RouterLink],\n        styles: [\".width-100[_ngcontent-%COMP%]{width:100%}.auth-container[_ngcontent-%COMP%]{background-color:brown;background-repeat:no-repeat;background-size:cover;display:flex;width:100vw;height:100vh;flex-direction:column;justify-content:center;align-items:center}.login-form[_ngcontent-%COMP%]{max-width:400px;width:100%;color:#fff;padding:16px;display:block}.login-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin:6px 0}.form-input[_ngcontent-%COMP%]{outline:none;border:1px solid #e6e6e6;padding:16px 12px;margin:8px 0;font-size:.8rem;width:-webkit-fill-available;display:inline-flex;background:transparent;border-radius:6px;color:#fff}.form-input[_ngcontent-%COMP%]::placeholder{color:inherit}.custom-button[_ngcontent-%COMP%]{outline:none;border:1px solid white;margin-top:12px;margin-bottom:12px;font-size:.8rem;color:#fff;border-radius:6px;background:transparent;width:33%;padding:2px}.custom-button.block-button[_ngcontent-%COMP%]{width:100%}.custom-button[_ngcontent-%COMP%]:hover, .custom-button[_ngcontent-%COMP%]:focus{background:#fff3}.custom-button[_ngcontent-%COMP%]:disabled{background-color:#e6e6e6;color:#707070;cursor:not-allowed}.custom-button.submit-button[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}.text-white[_ngcontent-%COMP%]{color:#fff}label[_ngcontent-%COMP%]{font-size:14px}.buttons-section[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center}.separator-section[_ngcontent-%COMP%]{display:flex;width:100%;margin-top:20px;margin-bottom:12px;justify-content:center;align-items:center;border-radius:1px}.separator-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.button-link[_ngcontent-%COMP%]{outline:none;border:1px solid white;margin-top:12px;margin-bottom:12px;font-size:.8rem;color:#fff;border-radius:6px;background:transparent;width:33%;padding:6px;text-decoration:none;cursor:pointer}.divider-left[_ngcontent-%COMP%]{display:block;height:1px;margin-right:11px;margin-left:11px;flex:1 1 0%;background-image:linear-gradient(90deg,#e9edf100 35%,#a1a5be);border-radius:2px}.divider-right[_ngcontent-%COMP%]{display:block;height:1px;margin-right:11px;margin-left:11px;flex:1 1 0%;background-image:linear-gradient(90deg,#e9edf100 35%,#a1a5be);border-radius:2px;transform:rotate(180deg)}.toggle-visibility-btn[_ngcontent-%COMP%]{position:absolute;right:6px;top:33px;background:transparent;color:#fff}\"]\n      });\n    }\n  }\n  return SignUpComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}