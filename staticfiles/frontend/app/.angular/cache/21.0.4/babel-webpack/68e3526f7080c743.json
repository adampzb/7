{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../core/services/user/user.service\";\nimport * as i2 from \"../core/services/post/post.service\";\nimport * as i3 from \"../core/services/group/group.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/grid-list\";\nimport * as i7 from \"@angular/material/list\";\nimport * as i8 from \"@angular/material/progress-spinner\";\nimport * as i9 from \"@angular/router\";\nimport * as i10 from \"../post/post/post.component\";\nimport * as i11 from \"../post/post-loader/post-loader.component\";\nconst _c0 = a0 => [\"group\", a0];\nfunction FeedComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-post-loader\")(2, \"app-post-loader\")(3, \"app-post-loader\")(4, \"app-post-loader\")(5, \"app-post-loader\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction FeedComponent_ng_template_4_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-post\", 11);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const post_r1 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"post\", post_r1)(\"user_id\", ctx_r1.user == null ? null : ctx_r1.user.id);\n  }\n}\nfunction FeedComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, FeedComponent_ng_template_4_ng_container_0_Template, 2, 2, \"ng-container\", 10);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.posts);\n  }\n}\nfunction FeedComponent_ng_container_6_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵelement(2, \"mat-spinner\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"diameter\", 30);\n  }\n}\nfunction FeedComponent_ng_container_6_ng_template_2_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function FeedComponent_ng_container_6_ng_template_2_div_0_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.loadMorePosts());\n    });\n    i0.ɵɵtext(2, \"Load more posts\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction FeedComponent_ng_container_6_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, FeedComponent_ng_container_6_ng_template_2_div_0_Template, 3, 0, \"div\", 14);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.showLoader && ctx_r1.next);\n  }\n}\nfunction FeedComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, FeedComponent_ng_container_6_ng_container_1_Template, 3, 1, \"ng-container\", 5)(2, FeedComponent_ng_container_6_ng_template_2_Template, 1, 1, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const buttonview_r4 = i0.ɵɵreference(3);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.showLoader)(\"ngIfElse\", buttonview_r4);\n  }\n}\nfunction FeedComponent_mat_list_item_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-list-item\")(1, \"a\", 16);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const group_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c0, group_r5.id));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"u/\", group_r5.name);\n  }\n}\nexport let FeedComponent = /*#__PURE__*/(() => {\n  class FeedComponent {\n    constructor(userService, postService, groupService) {\n      this.userService = userService;\n      this.postService = postService;\n      this.groupService = groupService;\n      this.isLoading = false;\n      this.posts = [];\n      this.page = 1;\n      this.showLoader = false;\n      this.groups = [];\n    }\n    ngOnInit() {\n      this.getAuthUser();\n      this.getPosts();\n      this.topGroups();\n    }\n    getAuthUser() {\n      this.userService.userInitialized.subscribe(initialized => {\n        if (initialized) {\n          this.userService.user.subscribe(response => {\n            this.user = response;\n          });\n        }\n      });\n    }\n    getPosts() {\n      if (!this.showLoader) {\n        this.isLoading = true;\n      }\n      // console.log(this.page);\n      this.postService.getPosts(this.page).subscribe(response => {\n        this.posts = [...this.posts, ...response.results];\n        this.next = response.next;\n        if (this.next) {\n          this.page = parseInt(this.next.split('=')[1]);\n        }\n        this.isLoading = false;\n        this.showLoader = false;\n      }, err => {\n        console.log(err);\n        this.isLoading = false;\n        this.showLoader = false;\n      });\n    }\n    topGroups() {\n      this.groupService.getGroups().subscribe(response => {\n        this.groups = response;\n      });\n    }\n    loadMorePosts() {\n      this.showLoader = true;\n      this.getPosts();\n    }\n    static {\n      this.ɵfac = function FeedComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || FeedComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.PostService), i0.ɵɵdirectiveInject(i3.GroupService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: FeedComponent,\n        selectors: [[\"app-feed\"]],\n        standalone: false,\n        decls: 13,\n        vars: 4,\n        consts: [[\"showPosts\", \"\"], [\"buttonview\", \"\"], [\"fxLayout\", \"row\", \"fxLayoutGap\", \"16px\"], [\"fxLayout\", \"column\", \"fxFlex\", \"70\", \"fxFlex.lt-lg\", \"100\"], [1, \"width-100\"], [4, \"ngIf\", \"ngIfElse\"], [4, \"ngIf\"], [\"fxLayout\", \"column\", \"fxFlex\", \"30\", \"fxHide.lt-lg\", \"\"], [1, \"related-section\"], [1, \"heading-5\", \"text-uppercase\"], [4, \"ngFor\", \"ngForOf\"], [3, \"post\", \"user_id\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center center\", \"fxLayoutGap\", \"10px\", 2, \"height\", \"100px\"], [\"color\", \"warn\", 3, \"diameter\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center center\", \"fxLayoutGap\", \"10px\", \"style\", \"height: 100px\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", 3, \"click\"], [\"matLine\", \"\", 1, \"font-bold\", 3, \"routerLink\"]],\n        template: function FeedComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4);\n            i0.ɵɵtemplate(3, FeedComponent_ng_container_3_Template, 6, 0, \"ng-container\", 5)(4, FeedComponent_ng_template_4_Template, 1, 1, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor)(6, FeedComponent_ng_container_6_Template, 4, 2, \"ng-container\", 6);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"div\", 7)(8, \"div\", 8)(9, \"span\", 9);\n            i0.ɵɵtext(10, \" Top Communities \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"mat-nav-list\");\n            i0.ɵɵtemplate(12, FeedComponent_mat_list_item_12_Template, 3, 4, \"mat-list-item\", 10);\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            const showPosts_r6 = i0.ɵɵreference(5);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading)(\"ngIfElse\", showPosts_r6);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.next);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngForOf\", ctx.groups);\n          }\n        },\n        dependencies: [i4.NgForOf, i4.NgIf, i5.MatButton, i6.MatLine, i7.MatNavList, i7.MatListItem, i8.MatProgressSpinner, i9.RouterLink, i10.PostComponent, i11.PostLoaderComponent],\n        styles: [\".related-section[_ngcontent-%COMP%]{background-color:#fff;min-height:300px;margin-top:16px;border:1px solid #dedede;border-radius:8px;padding:16px}\"]\n      });\n    }\n  }\n  return FeedComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}