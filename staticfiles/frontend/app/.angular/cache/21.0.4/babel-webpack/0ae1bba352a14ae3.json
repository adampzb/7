{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@discussit/core/services/group/group.service\";\nimport * as i2 from \"@discussit/core/services/user/user.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"../../post/post/post.component\";\nimport * as i7 from \"../../post/post-loader/post-loader.component\";\nfunction GroupFeedComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-post-loader\")(2, \"app-post-loader\")(3, \"app-post-loader\")(4, \"app-post-loader\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction GroupFeedComponent_ng_template_5_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-post\", 7);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const post_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"post\", post_r2)(\"user_id\", ctx_r2.user == null ? null : ctx_r2.user.id);\n  }\n}\nfunction GroupFeedComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, GroupFeedComponent_ng_template_5_ng_container_0_Template, 2, 2, \"ng-container\", 6);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.groupPosts);\n  }\n}\nexport let GroupFeedComponent = /*#__PURE__*/(() => {\n  class GroupFeedComponent {\n    constructor(groupService, userService, router, route) {\n      this.groupService = groupService;\n      this.userService = userService;\n      this.router = router;\n      this.route = route;\n      this.groupPosts = [];\n      this.isLoading = true;\n    }\n    ngOnInit() {\n      this.getAuthUser();\n    }\n    ngOnChanges(changes) {\n      if (this.group) {\n        this.getFeed();\n      }\n    }\n    getAuthUser() {\n      this.userService.userInitialized.subscribe(initialized => {\n        if (initialized) {\n          this.userService.user.subscribe(user => {\n            this.user = user;\n          });\n        }\n      });\n    }\n    getFeed() {\n      this.groupService.getGroupPosts(this.group.id).subscribe(response => {\n        this.groupPosts = response;\n        console.log(this.groupPosts);\n        this.isLoading = false;\n      }, err => {\n        console.log(err);\n        this.isLoading = false;\n      });\n    }\n    redirect() {\n      this.router.navigate(['submit-post'], {\n        relativeTo: this.route\n      });\n    }\n    static {\n      this.ɵfac = function GroupFeedComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || GroupFeedComponent)(i0.ɵɵdirectiveInject(i1.GroupService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: GroupFeedComponent,\n        selectors: [[\"app-group-feed\"]],\n        inputs: {\n          group: \"group\"\n        },\n        standalone: false,\n        features: [i0.ɵɵNgOnChangesFeature],\n        decls: 7,\n        vars: 2,\n        consts: [[\"showPosts\", \"\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"start center\", \"fxLayoutGap\", \"16px\"], [\"fxFlex\", \"60px\", 1, \"user-avatar\"], [\"src\", \"https://cdn-icons-png.flaticon.com/512/3177/3177440.png\", \"height\", \"60\", \"width\", \"60\"], [\"matInput\", \"\", \"placeholder\", \"Create post\", \"rows\", \"2\", \"cols\", \"80\", 1, \"create-post-input\", 3, \"click\"], [4, \"ngIf\", \"ngIfElse\"], [4, \"ngFor\", \"ngForOf\"], [3, \"post\", \"user_id\"]],\n        template: function GroupFeedComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2);\n            i0.ɵɵelement(2, \"img\", 3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"textarea\", 4);\n            i0.ɵɵlistener(\"click\", function GroupFeedComponent_Template_textarea_click_3_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.redirect());\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(4, GroupFeedComponent_ng_container_4_Template, 5, 0, \"ng-container\", 5)(5, GroupFeedComponent_ng_template_5_Template, 1, 1, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n          }\n          if (rf & 2) {\n            const showPosts_r4 = i0.ɵɵreference(6);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading)(\"ngIfElse\", showPosts_r4);\n          }\n        },\n        dependencies: [i4.NgForOf, i4.NgIf, i5.MatInput, i6.PostComponent, i7.PostLoaderComponent],\n        styles: [\".create-post-input[_ngcontent-%COMP%]{font-size:16px;font-family:inherit;outline:none;border:1px solid #dedede;border-radius:8px;display:block;padding:32px 16px;width:-webkit-fill-available;margin:16px 0;resize:none}\"]\n      });\n    }\n  }\n  return GroupFeedComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}