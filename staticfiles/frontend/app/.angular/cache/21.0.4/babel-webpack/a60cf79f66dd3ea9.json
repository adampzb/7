{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@discussit/core/services/post/post.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/progress-spinner\";\nimport * as i6 from \"../post/post/post.component\";\nfunction SearchComponent_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-post\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const post_r1 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"post\", post_r1)(\"showFooter\", false);\n  }\n}\nfunction SearchComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, SearchComponent_ng_container_1_ng_container_1_Template, 2, 2, \"ng-container\", 3);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.posts);\n  }\n}\nfunction SearchComponent_ng_container_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵelement(2, \"mat-spinner\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"diameter\", 30);\n  }\n}\nfunction SearchComponent_ng_container_2_ng_template_2_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function SearchComponent_ng_container_2_ng_template_2_div_0_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.loadMorePosts());\n    });\n    i0.ɵɵtext(2, \"Load more posts\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction SearchComponent_ng_container_2_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, SearchComponent_ng_container_2_ng_template_2_div_0_Template, 3, 0, \"div\", 8);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.showLoader && ctx_r1.next);\n  }\n}\nfunction SearchComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, SearchComponent_ng_container_2_ng_container_1_Template, 3, 1, \"ng-container\", 5)(2, SearchComponent_ng_container_2_ng_template_2_Template, 1, 1, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const buttonview_r4 = i0.ɵɵreference(3);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.showLoader)(\"ngIfElse\", buttonview_r4);\n  }\n}\nexport let SearchComponent = /*#__PURE__*/(() => {\n  class SearchComponent {\n    constructor(postService, route, router) {\n      this.postService = postService;\n      this.route = route;\n      this.router = router;\n      this.posts = [];\n      this.query = '';\n      this.page = 1;\n      this.isLoading = false;\n      this.showLoader = false;\n    }\n    ngOnInit() {\n      this.route.queryParams.subscribe(params => {\n        this.query = params.query;\n      });\n      this.fetchPosts();\n    }\n    fetchPosts() {\n      this.postService.filterPosts(this.page, this.query, '', '', '').subscribe(response => {\n        this.posts = [...this.posts, ...response.results];\n        this.next = response.next;\n        if (this.next) {\n          const page_params = this.next.split('&')[2];\n          this.page = parseInt(page_params.split('=')[1]);\n          console.log(this.page);\n        }\n        this.isLoading = false;\n        this.showLoader = false;\n      }, err => {\n        console.log(err);\n        this.isLoading = false;\n        this.showLoader = false;\n      });\n    }\n    loadMorePosts() {\n      this.showLoader = true;\n      this.fetchPosts();\n    }\n    static {\n      this.ɵfac = function SearchComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SearchComponent)(i0.ɵɵdirectiveInject(i1.PostService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: SearchComponent,\n        selectors: [[\"app-search\"]],\n        standalone: false,\n        decls: 3,\n        vars: 2,\n        consts: [[\"buttonview\", \"\"], [1, \"width-100\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"post\", \"showFooter\"], [4, \"ngIf\", \"ngIfElse\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center center\", \"fxLayoutGap\", \"10px\", 2, \"height\", \"100px\"], [\"color\", \"warn\", 3, \"diameter\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center center\", \"fxLayoutGap\", \"10px\", \"style\", \"height: 100px\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", 3, \"click\"]],\n        template: function SearchComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 1);\n            i0.ɵɵtemplate(1, SearchComponent_ng_container_1_Template, 2, 1, \"ng-container\", 2)(2, SearchComponent_ng_container_2_Template, 4, 2, \"ng-container\", 2);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.posts);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.next);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i4.MatButton, i5.MatProgressSpinner, i6.PostComponent],\n        encapsulation: 2\n      });\n    }\n  }\n  return SearchComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}